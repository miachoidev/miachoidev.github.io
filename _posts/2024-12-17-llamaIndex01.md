---
layout: post
title:  " LlamaIndexë¡œ Local LLM ëª¨ë¸ Agent with Tool ë§Œë“¤ê¸°"
---
# LlamaIndexë¡œ Local LLM ëª¨ë¸ Agent ë§Œë“¤ê¸°

ìš”ì¦˜ langChainì´ë‚˜ langGraphë¥¼ ì´ìš©í•˜ì—¬ agentë¥¼ êµ¬ì¶•í•˜ëŠ”ê²ƒì´ ëŒ€ì„¸ì¸ë° ëŒ€ë¶€ë¶„ì˜ ì˜ˆì‹œê°€ gptë‚˜ claude apië¥¼ ì§€ë¶ˆí•˜ê³  ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. í•˜ì§€ë§Œ í…ŒìŠ¤íŠ¸ í•˜ëŠ”ë° ìš”ì²­í• ë•Œë§ˆë‹¤ ê¸ˆì•¡ì´ ë‚˜ê°€ëŠ”ê²ƒì´ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤. ê·¸ë¦¬ê³  ì‹¤ì œ í˜„ì¥ì—ì„œëŠ” ë³´ì•ˆë¬¸ì œë¡œ ì¸í•´ ë¡œì»¬ ëª¨ë¸ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— gptë¡œ ì‹¤ìŠµí•˜ëŠ”ê±´ ì˜ë¯¸ê°€ ì—†ë‹¤. 
í•˜ì§€ë§Œ ë¡œì»¬ëª¨ë¸ì€ langchainí”„ë ˆì„ ì›Œí¬ë¡œ agentë¥¼ ë§Œë“¤ë©´ toolì„ í˜¸ì¶œí•˜ê³  ì‹¤í–‰í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œì ì´ ìˆë‹¤. langchainì´ ë¡œì»¬ ëª¨ë¸ì— ëŒ€í•œ agent, tool callingì„ ì™„ë²½í•˜ê²Œ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— llamaIndexë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•´ë³´ë ¤ê³  í•œë‹¤. ë¡œì»¬ ëª¨ë¸ì€ Llmaê¸°ë°˜ì˜ ëª¨ë¸ì´ë©° ëª¨ë¸ì„ ì§ì ‘ ë¡œë“œí•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ APIë¥¼ ë°°í¬í•´ ë†“ì€ ìƒíƒœì—ì„œ ì‚¬ìš©í–ˆë‹¤.

### ë¡œì»¬ì— ë°°í¬í•œ LLM ëª¨ë¸ api ë¡œë“œ
OpenAILike()ì„ ì´ìš©í•´ ëª¨ë¸ì„ ì •ì˜í•œë‹¤.


```python
from llama_index.core.agent import ReActAgent
from llama_index.llms.openai_like import OpenAILike

llm_url = "llm_url"
model_name = "model name"
llm = OpenAILike(api_base=llm_url, model=model_name, api_key="Test", temperature=0, max_tokens=512)
response = llm.complete("Hello World!")
print(str(response))
```

    /usr/local/lib/python3.10/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html
      from .autonotebook import tqdm as notebook_tqdm


    ì•ˆë…•í•˜ì„¸ìš”! "Hello World!"ëŠ” í”„ë¡œê·¸ë˜ë°ì—ì„œ ê°€ì¥ ê¸°ë³¸ì ì¸ ì¶œë ¥ ì˜ˆì œ ì¤‘ í•˜ë‚˜ë¡œ, ìƒˆë¡œìš´ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ë°°ìš¸ ë•Œ ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?


### Tool ì •ì˜í•˜ê¸°
langchainì²˜ëŸ¼ ë‹¤ì–‘í•œ ê¸°ë³¸ ì œê³µ íˆ´ë“¤ì´ ìˆê³  ì§ì ‘ ì •ì˜í•œ í•¨ìˆ˜ë„ íˆ´ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
FunctionToolì€ ê¸°ì¡´ í•¨ìˆ˜ë¥¼ ê°ì‹¸ëŠ” ê°„ë‹¨í•œ ë˜í¼ì´ë‹¤. 
ì‚¬ìš©í•  í•¨ìˆ˜ë¥¼ FunctionTool.from_defaults(fn=multiply)ì™€ ê°™ì´ íˆ´ë¡œ ì •ì˜í•œë‹¤.



```python
from llama_index.core.tools import FunctionTool
# í•´ë‹¹ ì˜ˆì‹œì—ì„œëŠ” ê°„ë‹¨í•œ ê³±ì…ˆê³¼ ê²€ìƒ‰ ëª©ì—… í•¨ìˆ˜ë¥¼ Toolë¡œ ë§Œë“¤ì–´ì¤Œ
def multiply(a: int, b: int) -> int:
    """Multiple two integers and returns the result integer"""
    return a * b

def drugInfo(a: str) -> str:
    """ì•½ë¬¼ì˜ ë¶€ì‘ìš©ì„ ì°¾ëŠ” ë„êµ¬"""
    return f"{a}ì˜ ë¶€ì‘ìš©: ì–´ì§€ëŸ¬ì›€ì¦ ë° êµ¬í† . í˜ˆì†ŒíŒ ê°ì†Œ. ê·¼ìœ¡ëŸ‰ ì €í•˜."


multiply_tool = FunctionTool.from_defaults(fn=multiply)
result = multiply_tool.call(a=5, b=3)
print(result) #ë„êµ¬ë¥¼ ì‹¤í–‰í•˜ë©´ 15ë¼ëŠ” ê°’ì´ ì¶œë ¥ëœë‹¤.

drug_tool = FunctionTool.from_defaults(fn=drugInfo)

```

    15


### Agent ì´ˆê¸°í™”
ë„êµ¬ ì„¸íŠ¸ë¥¼ ì •ì˜í•˜ê³  ì´ë¥¼ ReActAgent êµ¬í˜„ì— ì œê³µí•¨ìœ¼ë¡œì¨ ê°€ëŠ¥


```python
agent = ReActAgent.from_tools([multiply_tool, drug_tool], llm=llm, verbose=True)

response = agent.chat("ì´ì†Œí˜ë‚˜ë‹ì´ë¼ëŠ” ì•½ì˜ ë¶€ì‘ìš©ì´ ë­ì•¼") 

response = agent.chat("4344ë‘ 333ê³±í•˜ë©´ ë­ì•¼") 

response = agent.chat("ì•ˆë…•") 

```

    > Running step d4ff3b60-fb4c-40bd-98dc-340cb86af8d7. Step input: ì´ì†Œí˜ë‚˜ë‹ì´ë¼ëŠ” ì•½ì˜ ë¶€ì‘ìš©ì´ ë­ì•¼
    [1;3;38;5;200mThought: The current language of the user is: Korean. I need to use a tool to help me answer the question.
    Action: drugInfo
    Action Input: {'a': 'ì´ì†Œí˜ë‚˜ë‹'}
    [0m[1;3;34mObservation: ì´ì†Œí˜ë‚˜ë‹ì˜ ë¶€ì‘ìš©: ì–´ì§€ëŸ¬ì›€ì¦ ë° êµ¬í† . í˜ˆì†ŒíŒ ê°ì†Œ. ê·¼ìœ¡ëŸ‰ ì €í•˜.
    [0m> Running step a2ce8be5-38fb-442d-8ba6-f0c29d984473. Step input: None
    [1;3;38;5;200mThought: I can answer without using any more tools. I'll use the user's language to answer
    Answer: ì´ì†Œí˜ë‚˜ë‹ì˜ ë¶€ì‘ìš©ì€ ì–´ì§€ëŸ¬ì›€ì¦ ë° êµ¬í† , í˜ˆì†ŒíŒ ê°ì†Œ, ê·¼ìœ¡ëŸ‰ ì €í•˜ì…ë‹ˆë‹¤.
    [0m> Running step 7ffb46a1-0aca-4d80-9242-b1a517214465. Step input: 4344ë‘ 333ê³±í•˜ë©´ ë­ì•¼
    [1;3;38;5;200mThought: The current language of the user is: Korean. I need to use a tool to help me answer the question.
    Action: multiply
    Action Input: {'a': 4344, 'b': 333}
    [0m[1;3;34mObservation: 1446552
    [0m> Running step 1d160362-6ecb-4389-bcc2-19de5e2cc035. Step input: None
    [1;3;38;5;200mThought: I can answer without using any more tools. I'll use the user's language to answer
    Answer: 4344ì™€ 333ì„ ê³±í•˜ë©´ 1446552ì…ë‹ˆë‹¤.
    [0m> Running step c5cdba90-8e8e-4c73-9343-8c69b4f80b39. Step input: ì•ˆë…•
    [1;3;38;5;200mThought: (Implicit) I can answer without any more tools!
    Answer: ì•ˆë…•í•˜ì„¸ìš”! ì–´ë–»ê²Œ ë„ì™€ë“œë¦´ê¹Œìš”?
    [0m


```python

```
